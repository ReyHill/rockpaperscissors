<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>RPS</title>
</head>
<body>
    <script>

        // FEATURE: Include the results of the fifth round in the game over notice.

        const choices = ['rock', 'paper', 'scissors'];
        let round = 0;
        let computerScore = 0;
        let playerScore = 0;

        // PLAYER INPUT LOGIC
        function getComputerChoice() {
            const num = Math.floor(Math.random() * 3); 
            if(num === 0) {
                return(choices[0]);
            } else if(num === 1) {
                return(choices[1]);
            } else if(num === 2) {
                return(choices[2]);
            }
        }

        // ENDGAME LOGIC 
            function endGame() {
                if (computerScore > playerScore) {
                    message.textContent = `GAME OVER!`;
                    const summary = document.createElement('p');
                    summary.textContent = `Final Score: Computer ${computerScore} - Player ${playerScore}. The computer has won the game! Click an option to begin a new game.`;
                    document.querySelector('#ui').appendChild(summary);
                    round = 0;
                    computerScore = 0;
                    playerScore = 0;
                    const gameButtons = document.querySelectorAll('.btn'); 
                    gameButtons.forEach(element => {
                        element.addEventListener('click', (e) => {
                            summary.remove()
                        });
                    });
                } else if (playerScore > computerScore) {
                    message.textContent = 'GAME OVER!'
                    const summary = document.createElement('p');
                    summary.textContent = `Final Score: Computer ${computerScore} - Player ${playerScore}. The player has won the game! Click an option to begin a new game.`;
                    document.querySelector('#ui').appendChild(summary);
                    round = 0;
                    computerScore = 0;
                    playerScore = 0;
                    const gameButtons = document.querySelectorAll('.btn'); 
                    gameButtons.forEach(element => {
                        element.addEventListener('click', (e) => {
                            summary.remove()
                        });
                    });
                } else if (computerScore === playerScore) {
                    message.textContent = 'GAME OVER!'
                    const summary = document.createElement('p');
                    summary.textContent = `Final Score: Computer ${computerScore} - Player ${playerScore}. The game has ended in a tie! Click an option to begin a new game.`;
                    document.querySelector('#ui').appendChild(summary);
                    round = 0;
                    computerScore = 0;
                    playerScore = 0;
                    const gameButtons = document.querySelectorAll('.btn'); 
                    gameButtons.forEach(element => {
                        element.addEventListener('click', (e) => {
                            summary.remove()
                        });
                    });
                }
            }

        //ROUND LOGIC
            function playRound(computerChoice, humanChoice) {

                switch (true) {
                    case computerChoice === choices[0] && humanChoice === choices[0]:
                        round++;
                        message.textContent = `Computer chose ${choices[0]}, player chose ${choices[0]}. Tie!`;
                        roundNumber.textContent = `Round: ${round}`;
                        break; 
                    case computerChoice === choices[1] && humanChoice === choices[1]:
                        round++;
                        message.textContent = `Computer chose ${choices[1]}, player chose ${choices[1]}. Tie!`;
                        roundNumber.textContent = `Round: ${round}`;
                        break;
                    case computerChoice === choices[2] && humanChoice === choices[2]:
                        round++;
                        message.textContent = `Computer chose ${choices[2]}, player chose ${choices[2]}. Tie!`;
                        roundNumber.textContent = `Round: ${round}`;
                        break;
                    case computerChoice === choices[0] && humanChoice === choices[1]:
                        round++;
                        playerScore++;
                        message.textContent = `Computer chose ${choices[0]}, player chose ${choices[1]}. Player wins!`;
                        roundNumber.textContent = `Round: ${round}`;
                        userScore.textContent = `Player: ${playerScore}`;
                        break; 
                    case computerChoice === choices[0] && humanChoice === choices[2]:
                        round++;
                        computerScore++;
                        message.textContent = `Computer chose ${choices[0]}, player chose ${choices[2]}. Computer wins!`;
                        roundNumber.textContent = `Round: ${round}`;
                        cpuScore.textContent = `Computer: ${computerScore}`;
                        break;
                    case computerChoice === choices[1] && humanChoice === choices[0]:
                        round++;
                        computerScore++;
                        message.textContent = `Computer chose ${choices[1]}, player chose ${choices[0]}. Computer wins!`;
                        roundNumber.textContent = `Round: ${round}`;
                        cpuScore.textContent = `Computer: ${computerScore}`;
                        break;
                    case computerChoice === choices[1] && humanChoice === choices[2]:
                        round++;
                        playerScore++;
                        message.textContent = `Computer chose ${choices[1]}, player chose ${choices[2]}. Player wins!`;
                        roundNumber.textContent = `Round: ${round}`;
                        userScore.textContent = `Player: ${playerScore}`;
                        break;
                    case computerChoice === choices[2] && humanChoice === choices[0]:
                        round++;
                        playerScore++;
                        message.textContent = `Computer chose ${choices[2]}, player chose ${choices[0]}. Player wins!`;
                        roundNumber.textContent = `Round: ${round}`;
                        userScore.textContent = `Player: ${playerScore}`;
                        break;
                    case computerChoice === choices[2] && humanChoice === choices[1]:
                        round++;
                        computerScore++;
                        message.textContent = `Computer chose ${choices[2]}, player chose ${choices[1]}. Computer wins!`;
                        roundNumber.textContent = `Round: ${round}`;
                        cpuScore.textContent = `Computer: ${computerScore}`;
                        break;
                    default: 
                        round++;
                        computerScore++;
                        message.textContent = `Think you're funny? +1 to the computer!`;
                        roundNumber.textContent = `Round: ${round}`;
                        cpuScore.textContent = `Computer: ${computerScore}`;
                        break;
                } 
                if (round === 5) {
                    endGame();
                } 
            }

        //USER INTERFACE
        const display = document.createElement('div'); 
        display.setAttribute('id', 'ui');
        document.body.appendChild(display); 

        const message = document.createElement('p');
        message.textContent = 'Hey there! Click a button to begin a five round game of Rock, Paper, Scissors.';
        display.appendChild(message);

        const roundNumber = document.createElement('p');
        roundNumber.textContent = `Round: ${round}`;
        display.appendChild(roundNumber);

        const cpuScore = document.createElement('p');
        cpuScore.textContent = `Computer: ${computerScore}`;
        display.appendChild(cpuScore); 
        
        const userScore = document.createElement('p');
        userScore.textContent = `Player: ${playerScore}`;
        display.appendChild(userScore);

        const rockBtn = document.createElement('button'); 
        rockBtn.setAttribute('id', 'rock');
        rockBtn.setAttribute('class', 'btn');
        rockBtn.textContent = 'Rock';
        display.appendChild(rockBtn); 

        const paperBtn = document.createElement('button');
        paperBtn.setAttribute('id', 'paper');
        paperBtn.setAttribute('class', 'btn');
        paperBtn.textContent = 'Paper';
        display.appendChild(paperBtn);

        const scissorsBtn = document.createElement('button');
        scissorsBtn.setAttribute('id', 'scissors');
        scissorsBtn.setAttribute('class', 'btn');
        scissorsBtn.textContent = 'Scissors'; 
        display.appendChild(scissorsBtn);

        //  BUTTON EVENT LISTENERS
        rockBtn.addEventListener('click', function (e) {
            playRound(getComputerChoice(), e.target.id); 
        });
        paperBtn.addEventListener('click', function (e) {
            playRound(getComputerChoice(), e.target.id); 
        });
        scissorsBtn.addEventListener('click', function (e) {
            playRound(getComputerChoice(), e.target.id); 
        });

    </script>
</body>
</html>